
.c-alert {
  margin: 1em 0;
  padding: 0.2em 0.8em;
  border-radius: 0.5em;
  font-size: 0.9em;
  background-color: var(--ld-bg-card);
  background-image:
    radial-gradient(circle at 4em -25em, var(--c-primary), transparent 30em),
    linear-gradient(var(--c-primary) -2000%, transparent);
  transition: transform 0.2s, box-shadow 0.2s;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px color-mix(in srgb, var(--c-primary) 20%, transparent);
  }

  @supports (color: color-mix(in srgb, transparent, transparent)) {
    --c-primary-soft: color-mix(in srgb, var(--c-primary) 15%, transparent);
  }

  // 关闭渐变效果
  &.no-gradient {
    background-image: none;
  }

  // 卡片模式
  &.card {
    padding: 0.8em 1.2em;
    border-radius: 0.75em;
    box-shadow: 
      0 2px 8px color-mix(in srgb, var(--c-primary) 15%, transparent),
      inset 0 0 0 1px color-mix(in srgb, var(--c-primary) 20%, transparent);
    
    &:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 6px 16px color-mix(in srgb, var(--c-primary) 25%, transparent),
        inset 0 0 0 1px color-mix(in srgb, var(--c-primary) 30%, transparent);
    }
  }

  .c-alert-title {
    display: flex;
    align-items: center;
    gap: 0.5em;
    margin: 0.5em 0;
    font-weight: bold;
    color: var(--c-primary);

    p { margin: 0; }
  }

  .c-alert-body {
    p:last-child { margin-bottom: 0.5em; }
  }
}

// ========================================
// Tab 标签页
// ========================================
.center {
  width: fit-content;
  max-width: 100%;
  margin-inline: auto;
}

.c-tabs {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.5em;
  position: relative;
  width: fit-content;
  margin: 0 auto;
  font-size: 0.9em;
  line-height: 1.4;

  button {
    position: relative;
    margin-bottom: 0.5em;
    padding: 0.3em 0.5em;
    border: none;
    border-radius: 0.4em;
    background: none;
    color: var(--c-text-2);
    cursor: pointer;
    transition: all 0.2s;

    &:hover {
      background-color: var(--c-bg-soft);
      color: var(--c-text);
    }

    &::before, &::after {
      display: block;
      position: absolute;
      bottom: -0.5em;
      inset-inline: 0.8em;
      height: 2px;
      border-radius: 1em;
      pointer-events: none;
    }

    &::after {
      content: "";
      inset-inline: -0.8em;
      background-color: var(--c-border);
    }

    &.active {
      box-shadow: 0 1px 0.5em var(--ld-shadow);
      background-color: var(--ld-bg-card);
      color: var(--c-text);

      &::before {
        content: "";
        background-color: var(--c-primary);
        z-index: 1;
      }
    }
  }
}

.c-tab-content {
  padding: 0.5em 0;

  .c-tab-panel {
    display: none;
    text-align: center;
    &.active { display: block; }

    // 有复杂内容时左对齐
    &:has(ul, ol, pre, table, blockquote) { text-align: left; }
  }
}

// ========================================
// Copy 复制命令
// ========================================
.c-copy {
  display: flex;
  overflow: clip;
  margin: 0.5rem 0;
  border: 1px solid var(--c-border);
  border-radius: 4px;
  background-color: var(--ld-bg-card);
  font-size: 0.8rem;
  line-height: 2.5;
  transition: border-color 0.2s;

  &:focus-within {
    border-color: var(--c-primary);
    outline: 0.2em solid var(--c-primary-soft);

    .c-copy-prompt {
      border-inline-end-color: var(--c-primary);
      background-color: var(--c-primary-soft);
      color: var(--c-primary);
    }
  }

  .c-copy-prompt {
    flex-shrink: 0;
    padding: 0 1em;
    border-inline-end: 1px solid var(--c-border);
    background-color: var(--c-bg-2);
    color: var(--c-text-2);
    transition: all 0.2s;
  }

  .c-copy-code {
    flex-grow: 1;
    position: relative;
    overflow-x: auto;
    padding: 0 1em;
    outline: none;
    white-space: nowrap;

    &::-webkit-scrollbar {
      height: 4px;
      background-color: transparent;
    }
  }

  .c-copy-btn {
    flex-shrink: 0;
    height: 2.5em;
    margin-inline-start: -0.5em;
    padding: 0.5em;
    border: none;
    background: none;
    color: var(--c-text-2);
    cursor: pointer;
    transition: color 0.2s;

    &:hover { color: var(--c-primary); }
  }
}

// ========================================
// Folding 折叠
// ========================================
.c-folding {
  margin: 1em 0;
  border: 1px solid var(--c-border);
  border-radius: 0.5em;
  background-color: var(--c-bg-2);
  font-size: 0.9em;
  transition: height 0.2s;

  &[open] {
    summary {
      font-weight: bold;
      color: currentcolor;

      &::before { content: "收起"; }
    }
  }

  summary {
    padding: 0.5em 0.8rem;
    color: var(--c-text-2);
    cursor: pointer;
    transition: all 0.2s;

    > p { display: inline; }

    &::before {
      content: "展开";
      float: right;
      float: inline-end;
      opacity: 0.5;
      margin-inline-start: 0.5em;
      font-weight: normal;
      transition: color 0.2s;
    }

    &:hover { color: var(--c-text); }
  }

  .c-folding-detail {
    position: relative;
    padding: 0 0.8rem 0.5rem;
  }
}

// ========================================
// Tip 提示文本
// ========================================
.c-tip {
  position: relative;
  text-decoration: underline dashed var(--c-text-3);
  cursor: pointer;
  text-underline-offset: 4px;

  &[data-tip]:not([data-tip=""]) {
    &::before {
      content: attr(data-tip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-8px);
      padding: 0.4em 0.8em;
      border-radius: 0.4em;
      background-color: var(--c-text);
      font-size: 0.85em;
      white-space: nowrap;
      color: var(--c-bg);
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s;
      z-index: 100;
    }

    &::after {
      content: "";
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: var(--c-text);
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s;
      z-index: 100;
    }

    &:hover::before,
    &:hover::after {
      opacity: 1;
      visibility: visible;
    }
  }
}

// ========================================
// Blur 模糊遮罩
// ========================================
.c-blur {
  transition: filter 0.2s;
  filter: blur(4px);

  &:hover { filter: blur(0); }
}

// ========================================
// Timeline 时间线
// ========================================
.c-timeline {
  position: relative;
  padding-inline-start: 1.5em;
  font-size: 0.9em;

  &::before {
    content: "";
    position: absolute;
    inset: 0.5em auto 0;
    inset-inline-start: 0.5em;
    width: 0.3em;
    background-color: var(--c-bg-soft);
  }

  dt {
    opacity: 0.8;
    font-size: 0.9em;

    &::before {
      content: "";
      position: absolute;
      inset-inline-start: 0.3em;
      width: 0.8em;
      height: 0.8em;
      margin-top: 0.5em;
      border-radius: 1em;
      background-color: var(--c-text-2);
    }
  }

  dd {
    overflow: hidden;
    width: fit-content;
    margin-bottom: 1em;
    padding: 0 1em;
  }
}

// ========================================
// Quote 引用
// ========================================
.c-quote {
  font-size: 1.2rem;
  line-height: 1.5;
  color: var(--c-text-2);

  p { margin: 0; }

  .c-quote-icon {
    position: relative;
    opacity: 0.5;
    min-height: 0.5em;
    margin-bottom: -0.5em;
    mask-image: linear-gradient(#FFF, transparent);
    font-size: 4rem;
    transition: all 0.2s;
    z-index: -1;
  }

  &:hover .c-quote-icon {
    opacity: 1;
    transform: translateY(-0.5rem);
  }
}

// ========================================
// Chat 聊天
// ========================================
.c-chat {
  margin-inline: 2vw;
  font-size: 0.9em;

  dt {
    opacity: 0.8;
    font-size: 0.9em;

    &.self {
      text-align: end;

      + dd {
        width: fit-content;
        margin-inline-start: auto;
        border-radius: 1em;
        border-start-end-radius: 0.2em;
        background-color: var(--c-primary-soft);
      }
    }

    &.system {
      margin-bottom: 1em;
      text-align: center;
    }
  }

  dd {
    overflow: hidden;
    width: fit-content;
    max-width: 90%;
    margin-bottom: 1em;
    padding: 0 1em;
    border-radius: 1em;
    border-start-start-radius: 0.2em;
    background-color: var(--c-bg-2);
  }
}

// ========================================
// Key 按键
// ========================================
.c-key {
  display: inline-block;
  margin: 0.1em;
  padding: 0 0.2em 0.1em;
  border-radius: 0.2em;
  box-shadow: inset 0 -0.15em 0 var(--c-bg-soft);
  background-color: var(--c-bg-soft);
  font-family: var(--font-monospace);
  font-size: 0.9em;
  letter-spacing: -0.05em;
  line-height: 1.4;
  color: var(--c-text-2);
  transition: all 0.1s;
  user-select: none;

  &:active {
    box-shadow: inset 0 -0.1em 0 var(--c-primary);
    background-color: var(--c-primary-soft);
    color: var(--c-primary);
    transform: translateY(0.05em);
  }
}

// ========================================
// CardList 卡片列表
// ========================================
.c-card-list {
  :where(ol, ul):not([class]) {
    margin: 0;
    padding-inline-start: 0;
    list-style: none;

    > li { margin: 0; }
  }

  > ol, > ul, > div > ol, > div > ul {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 0.5em;

    > li {
      padding: 0.5em 0.8em;
      border-radius: 0.5em;
      box-shadow: 0 2px 4px var(--ld-shadow);
      background-color: var(--ld-bg-card);
    }
  }
}

// ========================================
// Pic 图片
// ========================================
.c-pic {
  text-align: center;

  img {
    max-width: 100%;
    height: auto;
    cursor: zoom-in;
  }

  figcaption {
    margin-top: -0.5em;
    font-size: 0.8em;
    text-align: center;
    color: var(--c-text-2);
  }
}


// ========================================
// Progress 进度条
// ========================================
.c-progress {
  display: flex;
  align-items: center;
  gap: 0.8em;
  margin: 1em 0;
  font-size: 0.9em;

  .c-progress-label {
    flex-shrink: 0;
    min-width: 4em;
    color: var(--c-text-2);
  }

  .c-progress-bar {
    --c-progress-color: var(--c-primary);
    
    flex-grow: 1;
    height: 0.6em;
    border-radius: 1em;
    background-color: var(--c-bg-soft);
    overflow: hidden;
  }

  .c-progress-fill {
    height: 100%;
    border-radius: 1em;
    background: linear-gradient(90deg, var(--c-progress-color), color-mix(in srgb, var(--c-progress-color), white 20%));
    transition: width 0.5s ease-out;
  }

  .c-progress-text {
    flex-shrink: 0;
    min-width: 3em;
    font-variant-numeric: tabular-nums;
    text-align: right;
    color: var(--c-text-2);
  }
}

// ========================================
// EmojiClock 表情时钟
// ========================================
.c-emoji-clock {
  font-size: 1.2em;
  vertical-align: middle;
}

// ========================================
// Split 分栏布局
// ========================================
.c-split {
  display: grid;
  margin: 1em 0;

  > div {
    padding: 0.8em 1em;
    border-radius: 0.5em;
    background-color: var(--c-bg-2);

    > *:first-child { margin-top: 0; }
    > *:last-child { margin-bottom: 0; }
  }
}

// ========================================
// Stepper 步骤
// ========================================
.c-stepper {
  margin: 1.5em 0;
  padding: 0;
  list-style: none;
  counter-reset: stepper;

  .c-stepper-item {
    display: flex;
    gap: 1em;
    position: relative;
    padding-bottom: 1.5em;

    &:not(:last-child)::before {
      content: "";
      position: absolute;
      left: 1em;
      top: 2.2em;
      bottom: 0;
      width: 2px;
      background-color: var(--c-border);
    }

    &:last-child { padding-bottom: 0; }
  }

  .c-stepper-marker {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2em;
    height: 2em;
    border-radius: 50%;
    background-color: var(--c-primary);
    font-size: 0.9em;
    font-weight: bold;
    color: white;
  }

  .c-stepper-content {
    flex-grow: 1;
    padding-top: 0.2em;
  }

  .c-stepper-title {
    font-weight: 600;
    color: var(--c-text);
    margin-bottom: 0.3em;
  }

  .c-stepper-body {
    font-size: 0.9em;
    color: var(--c-text-2);

    p { margin: 0.5em 0; }
  }
}

// ========================================
// Note 便签
// ========================================
.c-note {
  --note-bg: #fff9c4;
  --note-shadow: #e6d98c;

  position: relative;
  width: fit-content;
  max-width: 320px;
  margin: 1.5em auto;
  padding: 1.2em 1.5em;
  background: linear-gradient(135deg, var(--note-bg) 0%, color-mix(in srgb, var(--note-bg), white 20%) 100%);
  box-shadow: 
    2px 2px 8px var(--note-shadow),
    inset 0 -1px 0 var(--note-shadow);
  font-size: 0.95em;
  line-height: 1.6;
  color: #5d4e37;
  transform: rotate(-1deg);
  transition: transform 0.2s;

  &:hover { transform: rotate(0deg) scale(1.02); }

  &.rotate { transform: rotate(2deg); }
  &.rotate:hover { transform: rotate(0deg) scale(1.02); }

  // 顶部折角
  &::before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0 20px 20px 0;
    border-color: transparent var(--c-bg-1) transparent transparent;
  }

  // 颜色变体
  &.c-note-green {
    --note-bg: #c8e6c9;
    --note-shadow: #a5c6a7;
  }

  &.c-note-blue {
    --note-bg: #bbdefb;
    --note-shadow: #90c7f5;
    color: #1a4a6e;
  }

  &.c-note-pink {
    --note-bg: #f8bbd9;
    --note-shadow: #e8a0c4;
    color: #6b2d4f;
  }

  &.c-note-purple {
    --note-bg: #e1bee7;
    --note-shadow: #c99fd1;
    color: #4a2462;
  }

  p { margin: 0.3em 0; }
}

// 暗色模式下便签适配
.dark .c-note {
  --note-shadow: rgba(0, 0, 0, 0.3);
  filter: brightness(0.85) saturate(0.9);
}

// ========================================
// 工具类
// ========================================
.text-center { text-align: center; }
