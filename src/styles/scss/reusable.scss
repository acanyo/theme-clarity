$breakpoint-mobile: 768px !default;
$breakpoint-widescreen: 1080px !default;

// 一部分具有卡片样式的组件复用了此类
.card {
	display: block;
	overflow: hidden;
	overflow: clip;
	border-radius: 0.5em;
	box-shadow: 0 0.1em 0.2em var(--ld-shadow);
	background-color: var(--ld-bg-card);
	transition: all 0.2s;

	&:hover {
		box-shadow: 0 0.5em 1em var(--ld-shadow);
		transform: translateY(-2px);
	}
}

.gradient-card {
	position: relative;
	border-radius: 0.5rem;
	z-index: 0;

	&::before {
		content: "";
		position: absolute;
		opacity: 0;
		inset: 0;
		border: 2px solid transparent;
		border-radius: inherit;
		background: linear-gradient(var(--c-bg-a80), var(--c-bg-a80)) padding-box, linear-gradient(45deg, var(--c-accent), var(--c-primary-soft)) border-box;
		transition: opacity 0.2s;
		z-index: -1;
	}

	&:hover, &.active {
		color: var(--c-text-1);

		&::before {
			opacity: 1;
		}
	}
}

// 横向滚动遮罩
// PURE CSS MAGIC!
.scrollcheck-x, .scrollcheck-y {
	scrollbar-width: thin;

	&::-webkit-scrollbar {
		width: 6px;
		height: 6px;
		background-color: var(--c-bg-2);
		cursor: default;
	}

	&::-webkit-scrollbar-thumb {
		border-radius: 4px;
		background-color: var(--c-bg-soft);
		cursor: pointer;
	}
}

.scrollcheck-x {
	--start-offset: 0px; // 如果填写 0 会在 calc() 时出错
	--scrollbar-height: 0.5rem;
	--fadeout-width: 2rem;

	overflow-x: auto;
	animation: scrollcheck-x;
	animation-timeline: scroll(x self);
}

@keyframes scrollcheck-x {
	0% {
		mask-image:
			linear-gradient(to var(--end), #FFF calc(100% - var(--fadeout-width)), transparent),
			linear-gradient(to top, #FFF var(--scrollbar-height), transparent var(--scrollbar-height));
	}

	0.01%, 99.99% {
		mask-image:
			linear-gradient(to var(--end), #FFF var(--start-offset), transparent var(--start-offset), #FFF calc(var(--start-offset) + var(--fadeout-width)), #FFF calc(100% - var(--fadeout-width)), transparent),
			linear-gradient(to top, #FFF var(--scrollbar-height), transparent var(--scrollbar-height));
	}

	100% {
		mask-image:
			linear-gradient(to var(--end), #FFF var(--start-offset), transparent var(--start-offset), #FFF calc(var(--start-offset) + var(--fadeout-width))),
			linear-gradient(to top, #FFF var(--scrollbar-height), transparent var(--scrollbar-height));
	}
}

.scrollcheck-y {
	// 如果填写 0 会在 calc() 时出错
	--top-offset: 0px;
	--guessed-scrollbar-width: 0.5rem;
	--fadeout-height: 2rem;

	overflow-y: auto;
	animation: scrollcheck-y;
	animation-timeline: scroll(y self);
}

@keyframes scrollcheck-y {
	0% {
		mask-image:
			linear-gradient(to bottom, #FFF calc(100% - var(--fadeout-height)), transparent),
			linear-gradient(to var(--start), #FFF var(--guessed-scrollbar-width), transparent var(--guessed-scrollbar-width));
	}

	0.01%, 99.99% {
		mask-image:
			linear-gradient(to bottom, #FFF var(--top-offset), transparent var(--top-offset), #FFF calc(var(--top-offset) + var(--fadeout-height)), #FFF calc(100% - var(--fadeout-height)), transparent),
			linear-gradient(to var(--start), #FFF var(--guessed-scrollbar-width), transparent var(--guessed-scrollbar-width));
	}

	100% {
		mask-image:
			linear-gradient(to bottom, #FFF var(--top-offset), transparent var(--top-offset), #FFF calc(var(--top-offset) + var(--fadeout-height))),
			linear-gradient(to var(--start), #FFF var(--guessed-scrollbar-width), transparent var(--guessed-scrollbar-width));
	}
}

mark {
	background: linear-gradient(var(--c-primary-soft), var(--c-primary-soft)) no-repeat left bottom / 100% 0.4em;
	text-decoration: none;
	color: var(--c-primary);
	transition: 0.2s;
	animation: line-spread 0.5s;

	@keyframes line-spread {
		from { background-size: 0 0.3em; }
	}

	&:hover {
		background-size: 100% 50%;
	}
}

.mobile-only {
	display: none;

	@media (max-width: $breakpoint-mobile) {
		display: revert;
		overflow: hidden;
	}
}

.widescreen-only {
	display: none;

	@media (min-width: $breakpoint-widescreen) {
		display: revert;
	}
}

.proper-height {
	min-height: 70vh;
}

.text-center {
	text-align: center;
}

.text-creative, .text-tech {
	font-family: var(--font-creative);
	font-weight: 550;
}

.text-story {
	font-family: var(--font-serif);
}

.text-repeat {
	text-shadow: 0.1em 0 var(--c-bg-soft), 0.2em 0 var(--c-bg-soft), 0.3em 0 var(--c-bg-soft), 0.4em 0 var(--c-bg-soft), 0.5em 0 var(--c-bg-soft);
}

.text-zoom {
	display: inline-block;
	transform-origin: left bottom;

	@supports (animation-timeline: view()) {
		animation: zoom 1s both;
		animation-timeline: view();
	}

	@keyframes zoom {
		from { transform: scale(0.8); }
		to { transform: scale(1.25); }
	}
}

// ========================================
// 全局分页样式 (移植自 blog-v3)
// ========================================
.pagination-wrapper {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 2rem 1rem;
	margin-top: 1rem;
}

.pagination {
	display: flex;
	align-items: center;
	overflow: hidden;
	max-width: calc(100vw - 2rem);
	border: 1px solid var(--c-border);
	border-radius: 0.5rem;
	box-shadow: 0 0.1em 0.2em var(--ld-shadow);
	background-color: var(--ld-bg-card);
	font-variant-numeric: tabular-nums;
	transition: max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.page-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 3em;
	height: 2.75em;
	padding: 0 0.6em;
	font-size: 0.9rem;
	font-weight: 500;
	color: var(--c-text-2);
	background: transparent;
	transition: all 0.2s ease;
	text-decoration: none;
	cursor: pointer;

	&:hover:not(.disabled):not(.active) {
		background-color: var(--c-bg-soft);
		color: var(--c-text);
	}

	&:active:not(.disabled) {
		background-color: var(--c-border);
	}

	&.active {
		background-color: var(--c-primary);
		color: white;
		border-radius: 0.4em;
		margin: 0.25em;
		min-width: 2.5em;
		box-shadow: 0 2px 8px rgba(var(--c-primary-rgb), 0.35);
	}

	&.disabled {
		color: var(--c-text-3);
		cursor: not-allowed;
		pointer-events: none;
	}

	[class^="icon-"] {
		font-size: 1.1rem;
	}

	// 上一页/下一页按钮 - 推到两端
	&:first-child {
		margin-inline-end: auto;
	}
	
	&:last-child {
		margin-inline-start: auto;
	}
}

// 页码分隔符（省略号）
.page-ellipsis {
	min-width: 2em;
	color: var(--c-text-3);
	text-align: center;
	pointer-events: none;
}

.page-info {
	display: flex;
	align-items: center;
	gap: 0.25rem;
	padding: 0 0.75rem;
	font-size: 0.85rem;
	font-weight: 500;
	font-variant-numeric: tabular-nums;
	color: var(--c-text-3);
	white-space: nowrap;
	
	strong, span:first-child {
		color: var(--c-text-2);
	}
}

// 页码列表容器
.page-numbers {
	display: flex;
	align-items: center;
	gap: 0.25rem;
	padding: 0 0.5rem;
}

// 单个页码
.page-num {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 2.25em;
	height: 2.25em;
	padding: 0 0.5em;
	font-size: 0.85rem;
	font-weight: 500;
	font-variant-numeric: tabular-nums;
	color: var(--c-text-2);
	background: transparent;
	border-radius: 0.375rem;
	text-decoration: none;
	transition: all 0.15s ease;

	&:hover:not(.active) {
		background-color: var(--c-bg-soft);
		color: var(--c-text);
	}

	&.active {
		background-color: var(--c-primary);
		color: white;
		box-shadow: 0 2px 6px rgba(var(--c-primary-rgb), 0.3);
	}
}

// 文字版按钮
.page-text {
	margin: 0 0.25em;
	font-size: 0.85rem;
}

// ========================================
// 浮动按钮 Mixin
// ========================================
@mixin floating-button($hover-text) {
	position: fixed;
	right: 2.5rem;
	bottom: calc(2.5rem + 60px);
	width: 50px;
	height: 50px;
	border-radius: 50%;
	background-color: var(--ld-bg-card);
	border: 1px solid var(--c-border);
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
	cursor: pointer;
	transition-duration: 0.3s;
	overflow: hidden;
	z-index: 99;
	color: var(--c-text);
	font-size: 1rem;

	@media (max-width: $breakpoint-mobile) {
		display: none;
	}

	&::before {
		position: absolute;
		bottom: -20px;
		content: $hover-text;
		color: white;
		font-size: 0px;
		white-space: nowrap;
	}

	&:hover {
		width: 120px;
		border-radius: 50px;
		background-color: var(--c-primary);
		border-color: var(--c-primary);
		box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
		transition-duration: 0.3s;
		transform: translateY(-4px);
		color: white;

		> span {
			transition-duration: 0.3s;
			transform: translateY(-200%);
		}

		&::before {
			font-size: 13px;
			opacity: 1;
			bottom: unset;
			transition-duration: 0.3s;
		}
	}

	> span {
		transition-duration: 0.3s;
	}
}

// ========================================
// 页码跳转样式
// ========================================
.page-jump {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	padding: 0 0.75rem;
	margin-left: 0.5rem;
	border-left: 1px solid var(--c-border);
}

.page-input {
	width: 4.5em;
	height: 2em;
	padding: 0 0.6em;
	font-size: 0.85rem;
	font-weight: 500;
	font-variant-numeric: tabular-nums;
	color: var(--c-text);
	background-color: var(--c-bg-2);
	border: 1px solid var(--c-border);
	border-radius: 0.375rem;
	text-align: center;
	transition: all 0.15s ease;

	&:focus {
		outline: none;
		border-color: var(--c-primary);
		box-shadow: 0 0 0 2px rgba(var(--c-primary-rgb), 0.2);
	}

	&::placeholder {
		color: var(--c-text-3);
		font-size: 0.8rem;
		opacity: 0.8;
	}
}

.page-jump-btn {
	height: 2em;
	width: 2em;
	padding: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 0.8rem;
	font-weight: 500;
	color: var(--c-text-2);
	background-color: var(--c-bg-soft);
	border: 1px solid var(--c-border);
	border-radius: 0.375rem;
	cursor: pointer;
	transition: all 0.15s ease;

	[class^="icon-"] {
		font-size: 1rem;
	}

	&:hover {
		background-color: var(--c-primary);
		color: white;
		border-color: var(--c-primary);
	}

	&:active {
		transform: scale(0.95);
	}
}