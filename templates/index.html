<!doctype html>
<html xmlns:th="https://www.thymeleaf.org" th:replace="~{modules/layout :: html(content = ~{::content}, showAside = true, pageTitle = null)}">
  <th:block th:fragment="content">
    <!-- Mobile Header -->
    <div class="clarity-header mobile-only">
      <!-- Emoji 尾巴漂浮效果 -->
      <div th:if="${theme.config.header.emoji_tail}" class="emoji-tail">
        <span
          th:each="emoji,iterStat : ${#strings.arraySplit(theme.config.header.emoji_tail, ',')}"
          class="split-char"
          th:style="'--delay: ' + ${iterStat.index * 0.6 - 3} + 's'"
          th:text="${emoji}"
        >
        </span>
      </div>

      <!-- Logo -->
      <a href="/">
        <img
          th:if="${theme.config.header.logo}"
          th:src="${theme.config.header.logo}"
          class="clarity-logo"
          th:classappend="${theme.config.header.show_title} ? 'circle' : ''"
          th:alt="${site.title}"
        />
      </a>

      <!-- 标题文字 -->
      <div th:if="${theme.config.header.show_title}" class="clarity-text">
        <div class="header-title">
          <span
            th:each="char,iterStat : ${#strings.arraySplit(site.title, '')}"
            class="split-char"
            th:style="'--delay: ' + ${(iterStat.index + 1) * 0.1} + 's'"
            th:text="${char}"
          >
          </span>
        </div>
        <div class="header-subtitle" th:text="${theme.config.header.subtitle}"></div>
      </div>
    </div>

    <!-- Post Slide (精选文章轮播) -->
    <th:block th:replace="~{modules/post-slide :: slide}" />

    <!-- Post List -->
    <th:block 
      th:with="pageSize = ${theme.config.post != null and theme.config.post.per_page != null ? theme.config.post.per_page : 10}, 
               currentPage = ${posts.page != null ? posts.page : 1}"
    >
      <th:block th:replace="~{modules/post-list :: list(posts=${postFinder.list(currentPage, pageSize)})}" />
    </th:block>
  </th:block>
</html>
